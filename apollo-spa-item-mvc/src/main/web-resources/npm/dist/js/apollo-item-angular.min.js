/**
 * @license Inertia v1.0
 * 
 * Inertia, Inc. 
 * License: MIT
 */
function test(){$.ajax({url:"wait.php",cache:!1})}var apolloHistoryServices=angular.module("apolloHistoryServices",["ngResource"]),apolloItemServices=angular.module("apolloItemServices",["ngResource"]),apolloMaintenanceControllers=angular.module("apolloMaintenanceControllers",[]),apolloMaintenanceApp=angular.module("apolloMaintenanceApp",["apolloMaintenanceControllers","ui.router","ngGrid","apolloItemServices","apolloHistoryServices","formly","formlyBootstrap"]);apolloMaintenanceApp.config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("item",{url:"/item",templateUrl:"html/maintenance/item-list.html",controller:"ApolloItemMaintenanceController"}).state("history",{url:"/history/:itemId",templateUrl:"html/maintenance/item-history.html",controller:"ApolloHistoryController"}).state("newitem",{url:"/newitem",templateUrl:"html/maintenance/item-new-form.html",controller:"ApolloNewItemController"})}]),apolloMaintenanceApp.directive("dynamicName",function(a){return{restrict:"A",terminal:!0,priority:1e3,link:function(b,c,d){c.attr("name",b.$eval(d.dynamicName)),c.removeAttr("dynamic-name"),a(c)(b)}}}),/**
 * @license Inertia v1.0
 * 
 * Inertia, Inc. 
 * License: MIT
 */
apolloItemServices.factory("ApolloItems",["$resource",function(a){return a("http://localhost:8888/api/apollospaitems/spaitem",{id:"@id"},{query:{method:"GET",isArray:!0},save:{method:"POST"},remove:{method:"DELETE"}})}]);var removeTemplate='<input type="button" value="remove" ng-click="removeRow($index)" />',linkCellTemplate='<a ng-href="#/history/{{row.entity._id}}">{{row.entity._id}}</a>';apolloMaintenanceControllers.controller("ApolloItemMaintenanceController",["$scope","ApolloItems",function(a,b){a.apolloItems=b.query(),a.orderProp="apolloItemName",a.totalServerItems=a.apolloItems.length,a.gridOptions={data:"apolloItems",columnDefs:[{field:"_id",displayName:"Item Id",cellTemplate:linkCellTemplate},{field:"apolloItemName",displayName:"Item Name",enableCellEdit:!0},{field:"apolloItemAmount",displayName:"Item Cost",enableCellEdit:!0},{field:"apolloItemDesc",displayName:"Item Description",enableCellEdit:!0},{field:"remove",displayName:"",cellTemplate:removeTemplate}],showGroupPanel:!1,jqueryUITheme:!0,enablePaging:!1,showFooter:!0,enableCellSelection:!0,enableRowSelection:!0,plugins:[new ngGridFlexibleHeightPlugin({maxHeight:1e3})]},a.addRow=function(){a.apolloItems.push({apolloItemName:"Empty",apolloItemAmount:0})},a.saveAllApolloItems=function(){$.blockUI({message:'<h1><img src="images/busy.gif" /> Just a moment...</h1>'}),angular.forEach(a.apolloItems,function(a){b.save({id:a.id},a)}),setTimeout(function(){a.apolloItems.length=0,a.apolloItems=b.query(),$.unblockUI()},2e3)},a.removeRow=function(){$.blockUI({message:'<h1><img src="images/busy.gif" /> Just a moment...</h1>'});var c=this.row.rowIndex,d=a.apolloItems[c];b.remove({id:d._id},function(){console.log("item deleted")},function(){console.log("item error during delete")}),setTimeout(function(){a.apolloItems.length=0,a.apolloItems=b.query(),$.unblockUI()},1e3)}}]),/**
 * @license Inertia v1.0
 * 
 * Inertia, Inc. 
 * License: MIT
 */
apolloItemServices.factory("ApolloNewItem",["$resource",function(a){return a("http://localhost:8888/api/apollospaitems/spaitem",{id:"@id"},{head:{url:"http://localhost:8888/api/apollospaitems/metadata",method:"GET"},find:{method:"GET"},submit:{method:"POST"}})}]),apolloMaintenanceControllers.controller("ApolloNewItemController",["$scope","ApolloNewItem",function(a,b){var c=this;c.apolloItem={},c.submit=function(){$.blockUI({message:'<h1><img src="images/busy.gif" /> Just a moment...</h1>'}),b.submit({id:c.apolloItem.id},c.apolloItem).$promise.then(function(a){c.apolloItem.id=a._id},function(a){alert(a)}),setTimeout(function(){$.unblockUI()},1e3)},a.loadProperties=function(){b.head().$promise.then(function(a){c.formFields=apollo.generateFields(a)})}}]),/**
 * @license Inertia v1.0
 * 
 * Inertia, Inc. 
 * License: MIT
 */
apolloItemServices.factory("ApolloHistory",["$resource",function(a){return a("http://localhost:8888/api/apollospaitems/history",{itemId:"@historyItemId"},{query:{method:"GET",isArray:!0}})}]),apolloMaintenanceControllers.controller("ApolloHistoryController",["$scope","$stateParams","ApolloHistory",function(a,b,c){a.historyItemId=b.itemId,a.itemHistory=c.query({itemId:a.historyItemId})}]),/**
 * @license Inertia v1.0
 * 
 * Inertia, Inc. License: MIT
 */
$(document).ajaxStop($.unblockUI),$(document).ready(function(){$(document).ready(function(){$("#saveAllItems").click(function(){$.blockUI({message:'<h1><img src="busy.gif" /> Just a moment...</h1>'})})})}),String.prototype.replaceAll=function(a,b){var c=this;return c.replace(new RegExp(a,"g"),b)};var apollo={generateFields:function(a){var b=0,c=new Array;return $.each(a,function(a,d){var e=new Object;e.templateOptions=new Object,e.key=a,"__v"==a?e=null:"_id"==a?(e.type="input",e.templateOptions.disabled="true"):"String"==d.instance&&d.options.max>500?(e.type="textarea",e.templateOptions.rows=4,e.templateOptions.cols=15):"String"==d.instance?e.type="input":"Number"==d.instance&&(e.type="input"),null!=e&&(e.templateOptions.required=d.isRequired,e.templateOptions.label=a.replaceAll("_"," "),c[b++]=e)}),c}};